<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>https://yinyuejun.top/</id>
    <title>你的饮月君</title>
    <updated>2023-07-21T08:51:00.911Z</updated>
    <generator>https://github.com/jpmonette/feed</generator>
    <author>
        <name>你的饮月君</name>
        <email>1686588552@qq.com</email>
        <uri>https://yinyuejun.top</uri>
    </author>
    <link rel="alternate" href="https://yinyuejun.top/"/>
    <link rel="self" href="https://yinyuejun.top/feed.atom"/>
    <subtitle>你的饮月君' Blog</subtitle>
    <logo>https://yinyuejun.top/horse.svg</logo>
    <icon>https://yinyuejun.top/horse.svg</icon>
    <rights>MIT License</rights>
    <entry>
        <title type="html"><![CDATA[下班倒计时]]></title>
        <id>https://yinyuejun.top/posts/下班倒计时.html</id>
        <link href="https://yinyuejun.top/posts/下班倒计时.html"/>
        <updated>2023-07-21T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[下班倒计时]]></summary>
        <content type="html"><![CDATA[<h1>下班倒计时</h1>
<pre><code class="language-javascript">// ==UserScript==
// @name         下班倒计时
// @namespace    https://bbs.tampermonkey.net.cn/
// @version      0.1.1
// @description  一个提醒你准时下班的demo,请使用ScriptCat运行
// @author       yinyuejun
// @crontab      59 17 * * 1,2,3,4,5
// @grant        GM_notification
// @grant        GM_getValue
// @grant        GM_setValue
// @grant        GM_updateNotification
// @debug
// ==/UserScript==
function getAvatarAndImage(id) {
  const baseUrl = &quot;https://gitee.com/hewang1an/StarRail-plugin/raw/main/resources/panel/resources&quot;;
  return {
    avatarUrl: baseUrl + `/avatar/${id}.png`,
    charImageUrl: baseUrl + `/char_image/${id}.png`,
  };
}

async function fetchCharacterData() {
  try {
    const response = await fetch(&quot;https://songzhanpeng.github.io/character.json&quot;);
    const data = await response.json();
    return data;
  } catch (error) {
    console.error(&quot;Error fetching character data:&quot;, error);
    return null;
  }
}

async function getRandomRole() {
  const cachedData = GM_getValue(&quot;characterData&quot;);
  if (cachedData) {
    const roleList = Object.entries(cachedData);
    const randomIndex = Math.floor(Math.random() * roleList.length);
    const roleInfo = roleList[randomIndex];
    const { avatarUrl, charImageUrl } = getAvatarAndImage(roleInfo[0]);
    return {
      id: roleInfo[1].id,
      name: roleInfo[1].name,
      avatar: avatarUrl,
      charImage: charImageUrl,
    };
  } else {
    const characterData = await fetchCharacterData();
    if (characterData) {
      GM_setValue(&quot;characterData&quot;, characterData);
      return getRandomRole();
    }
    return null;
  }
}

(async () =&gt; {

    const role = await getRandomRole();
    let i;
    GM_notification({
        title: `${role.name}:下班60s倒计时`,
        text: '准时下班，美好生活',
        image: role.avatar,
        ondone: (user) =&gt; {
            console.log('done user:', user);
            clearInterval(i);
            resolve();
        },
        onclick: () =&gt; {
            console.log('click');
        },
        oncreate: (id) =&gt; {
            let t = 1;
            i = setInterval(() =&gt; {
                GM_updateNotification(id, {
                    title: '下班' + (60 - t) + 's倒计时',
                    progress: 100 / 60 * t
                });
                if (t == 60) {
                    clearInterval(i);
                    GM_updateNotification(id, {
                        title: '下班啦！',
                        progress: 100
                    });
                    resolve();
                }
                t++;
            }, 1000);
        },
        // 开启进度条模式
        progress: 0,
    });
})();



</code></pre>
]]></content>
        <author>
            <name>你的饮月君</name>
            <email>1686588552@qq.com</email>
            <uri>https://yinyuejun.top</uri>
        </author>
    </entry>
    <entry>
        <title type="html"><![CDATA[定时提醒小助手]]></title>
        <id>https://yinyuejun.top/posts/定时提醒喝水小助手.html</id>
        <link href="https://yinyuejun.top/posts/定时提醒喝水小助手.html"/>
        <updated>2023-07-21T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[定时提醒小助手]]></summary>
        <content type="html"><![CDATA[<h1>定时提醒小助手</h1>
<pre><code class="language-javascript">// ==UserScript==
// @name         提醒喝水小助手
// @namespace    https://bbs.tampermonkey.net.cn/
// @version      0.1.0
// @description  工作日每半个小时提醒你喝水，定时时间可以自行修改
// @author       yinyuejun
// @crontab      */30 10-20/1 * * 1-5
// @grant        GM_notification
// @grant        GM_getValue
// @grant        GM_setValue
// @console log
// ==/UserScript==

function getAvatarAndImage(id) {
  const baseUrl = &quot;https://gitee.com/hewang1an/StarRail-plugin/raw/main/resources/panel/resources&quot;;
  return {
    avatarUrl: baseUrl + `/avatar/${id}.png`,
    charImageUrl: baseUrl + `/char_image/${id}.png`,
  };
}

async function fetchCharacterData() {
  try {
    const response = await fetch(&quot;https://songzhanpeng.github.io/character.json&quot;);
    const data = await response.json();
    return data;
  } catch (error) {
    console.error(&quot;Error fetching character data:&quot;, error);
    return null;
  }
}

async function getRandomRole() {
  const cachedData = GM_getValue(&quot;characterData&quot;);
  if (cachedData) {
    const roleList = Object.entries(cachedData);
    const randomIndex = Math.floor(Math.random() * roleList.length);
    const roleInfo = roleList[randomIndex];
    const { avatarUrl, charImageUrl } = getAvatarAndImage(roleInfo[0]);
    return {
      id: roleInfo[1].id,
      name: roleInfo[1].name,
      avatar: avatarUrl,
      charImage: charImageUrl,
    };
  } else {
    const characterData = await fetchCharacterData();
    if (characterData) {
      GM_setValue(&quot;characterData&quot;, characterData);
      return getRandomRole();
    }
    return null;
  }
}

(async () =&gt; {
  const currentDate = new Date();
  const currentHour = currentDate.getHours();

  if (currentHour &gt;= 9 &amp;&amp; currentHour &lt;= 20) {
    const role = await getRandomRole();
    if (role) {
      GM_notification({
        title: `${role.name}的温馨提醒`,
        text: &quot;开拓者，是时候喝杯水休息一下了&quot;,
        image: role.avatar,
      });
    }
  }
})();
</code></pre>
]]></content>
        <author>
            <name>你的饮月君</name>
            <email>1686588552@qq.com</email>
            <uri>https://yinyuejun.top</uri>
        </author>
    </entry>
    <entry>
        <title type="html"><![CDATA[提醒走动小助手]]></title>
        <id>https://yinyuejun.top/posts/提醒走动小助手.html</id>
        <link href="https://yinyuejun.top/posts/提醒走动小助手.html"/>
        <updated>2023-07-21T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[提醒走动小助手]]></summary>
        <content type="html"><![CDATA[<h1>提醒走动小助手</h1>
<pre><code class="language-javascript">// ==UserScript==
// @name         提醒走动小助手
// @namespace    https://bbs.tampermonkey.net.cn/
// @version      0.1.0
// @description  每隔一个小时提醒你走动一下，定时时间可以自行修改
// @author       yinyuejun
// @crontab      0 10-20/1 * * 1-5
// @grant        GM_notification
// @grant        GM_getValue
// @grant        GM_setValue
// @console log
// ==/UserScript==

function getAvatarAndImage(id) {
  const baseUrl = &quot;https://gitee.com/hewang1an/StarRail-plugin/raw/main/resources/panel/resources&quot;;
  return {
    avatarUrl: baseUrl + `/avatar/${id}.png`,
    charImageUrl: baseUrl + `/char_image/${id}.png`,
  };
}

async function fetchCharacterData() {
  try {
    const response = await fetch(&quot;https://songzhanpeng.github.io/character.json&quot;);
    const data = await response.json();
    return data;
  } catch (error) {
    console.error(&quot;Error fetching character data:&quot;, error);
    return null;
  }
}

async function getRandomRole() {
  const cachedData = GM_getValue(&quot;characterData&quot;);
  if (cachedData) {
    const roleList = Object.entries(cachedData);
    const randomIndex = Math.floor(Math.random() * roleList.length);
    const roleInfo = roleList[randomIndex];
    const { avatarUrl, charImageUrl } = getAvatarAndImage(roleInfo[0]);
    return {
      id: roleInfo[1].id,
      name: roleInfo[1].name,
      avatar: avatarUrl,
      charImage: charImageUrl,
    };
  } else {
    const characterData = await fetchCharacterData();
    if (characterData) {
      GM_setValue(&quot;characterData&quot;, characterData);
      return getRandomRole();
    }
    return null;
  }
}

(async () =&gt; {
  const currentDate = new Date();
  const currentHour = currentDate.getHours();

  if (currentHour &gt;= 9 &amp;&amp; currentHour &lt;= 20) {
    const role = await getRandomRole();
    console.log(role)
    GM_notification({
      title: role.name,
      text: &quot;你已经坐了一小时了，走动一下吧！&quot;,
      image: role.avatar,
    });
  }
})();

</code></pre>
]]></content>
        <author>
            <name>你的饮月君</name>
            <email>1686588552@qq.com</email>
            <uri>https://yinyuejun.top</uri>
        </author>
    </entry>
</feed>