import{_ as e,c as s,o as a,V as n}from"./chunks/framework.3bce2be7.js";const y=JSON.parse('{"title":"nvs 安装","description":"nvs","frontmatter":{"title":"nvs 安装","description":"nvs","date":"2023-08-03T00:00:00.000Z","tags":["nvs"]},"headers":[],"relativePath":"posts/nvs/README.md"}'),o={name:"posts/nvs/README.md"},t=n(`<h2 id="nvs-node-version-switcher" tabindex="-1">NVS (Node Version Switcher) <a class="header-anchor" href="#nvs-node-version-switcher" aria-label="Permalink to &quot;NVS (Node Version Switcher)&quot;">​</a></h2><p><a href="https://travis-ci.org/jasongin/nvs" target="_blank" rel="noreferrer"><img src="https://travis-ci.org/jasongin/nvs.svg?branch=master" alt="Build Status: Mac + Linux"></a> <a href="https://ci.appveyor.com/project/jasongin/nvs" target="_blank" rel="noreferrer"><img src="https://ci.appveyor.com/api/projects/status/p0mo0nobkf0ws7ie/branch/master?svg=true" alt="Build status: Windows"></a></p><p>NVS is a cross-platform utility for switching between different versions and forks of <a href="http://nodejs.org" target="_blank" rel="noreferrer"><strong>Node.js</strong></a>. NVS is itself written in node JavaScript.</p><p>This tool is obviously inspired by other node version manager tools, especially <a href="https://github.com/creationix/nvm" target="_blank" rel="noreferrer"><strong>nvm</strong></a>, from which it borrows a lot of ideas and some command-line syntax.</p><h2 id="setup" tabindex="-1">Setup <a class="header-anchor" href="#setup" aria-label="Permalink to &quot;Setup&quot;">​</a></h2><p>Following are basic setup instructions. <a href="https://github.com/jasongin/nvs/blob/master/doc/SETUP.md" target="_blank" rel="noreferrer">For more details and options for setting up NVS, refer to the Setup page.</a></p><h3 id="windows" tabindex="-1">Windows <a class="header-anchor" href="#windows" aria-label="Permalink to &quot;Windows&quot;">​</a></h3><p>A Windows Installer (MSI) package is available from the <a href="https://github.com/jasongin/nvs/releases" target="_blank" rel="noreferrer">NVS releases page on GitHub</a>.</p><p>You can use <a href="https://apps.microsoft.com/store/detail/app-installer/9NBLGGH4NNS1?hl=en-us&amp;gl=US" target="_blank" rel="noreferrer">winget</a> to install it (available by default in Windows 11):</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">winget</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">install</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">jasongin.nvs</span></span></code></pre></div><p>You can also use <a href="https://chocolatey.org" target="_blank" rel="noreferrer">chocolatey</a> to install it:</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">choco install nvs</span></span></code></pre></div><h3 id="mac-linux" tabindex="-1">Mac, Linux <a class="header-anchor" href="#mac-linux" aria-label="Permalink to &quot;Mac, Linux&quot;">​</a></h3><p>Specify the installation path, clone the repo, and <em>source</em> the <code>install</code> command:</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">export NVS_HOME=&quot;$HOME/.nvs&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">git clone https://github.com/jasongin/nvs &quot;$NVS_HOME&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">. &quot;$NVS_HOME/nvs.sh&quot; install</span></span></code></pre></div><p>The <code>nvs.sh</code> script adds an <code>nvs</code> shell function to the environment. Afterward the tool should be invoked as just <code>nvs</code> without any path. The <code>install</code> command adds lines to your <code>~/.bashrc</code>, <code>~/.profile</code>, or <code>~/.zshrc</code> file to source <code>nvs.sh</code>, so that the <code>nvs</code> function is available in future shells.</p><p>For ksh, the source <code>nvs.sh</code> needs to be in your <code>~/.kshrc</code> or wherever <code>$ENV</code> points.</p><h3 id="ci-environments" tabindex="-1">CI Environments <a class="header-anchor" href="#ci-environments" aria-label="Permalink to &quot;CI Environments&quot;">​</a></h3><p><a href="https://github.com/jasongin/nvs/blob/master/doc/CI.md" target="_blank" rel="noreferrer">NVS can be used in a CI environment</a> such as AppVeyor or Travis CI, to test a Node.js app or library on any version of Node.js that NVS can install.</p><h2 id="basic-usage" tabindex="-1">Basic usage <a class="header-anchor" href="#basic-usage" aria-label="Permalink to &quot;Basic usage&quot;">​</a></h2><p>To add the latest version of node:</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">nvs add latest</span></span></code></pre></div><p>Or to add the latest LTS version of node:</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">nvs add lts</span></span></code></pre></div><p>Then run the <code>nvs use</code> command to add a version of node to your PATH for the current shell:</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">$ nvs use lts</span></span>
<span class="line"><span style="color:#A6ACCD;">PATH += ~/.nvs/node/6.9.1/x64</span></span></code></pre></div><p>To add it to PATH permanently, use <code>nvs link</code>:</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">nvs link lts</span></span></code></pre></div><h2 id="command-reference" tabindex="-1">Command reference <a class="header-anchor" href="#command-reference" aria-label="Permalink to &quot;Command reference&quot;">​</a></h2><table><thead><tr><th>Command</th><th>Description</th></tr></thead><tbody><tr><td><code>nvs help &lt;command&gt;</code></td><td>Get detailed help for a command</td></tr><tr><td><code>nvs install</code></td><td>Initialize your profile for using NVS</td></tr><tr><td><code>nvs uninstall</code></td><td>Remove NVS from profile and environment</td></tr><tr><td><code>nvs --version</code></td><td>Display the NVS tool version</td></tr><tr><td><code>nvs add [version]</code></td><td>Download and extract a node version</td></tr><tr><td><code>nvs rm &lt;version&gt;</code></td><td>Remove a node version</td></tr><tr><td><code>nvs migrate &lt;fromver&gt; [tover]</code></td><td>Migrate global modules</td></tr><tr><td><code>nvs upgrade [fromver]</code></td><td>Upgrade to latest patch of major version</td></tr><tr><td><code>nvs use [version]</code></td><td>Use a node version in the current shell</td></tr><tr><td><code>nvs auto [on/off]</code></td><td>Automatically switch based on cwd</td></tr><tr><td><code>nvs run &lt;ver&gt; &lt;js&gt; [args...]</code></td><td>Run a script using a node version</td></tr><tr><td><code>nvs exec &lt;ver&gt; &lt;exe&gt; [args...]</code></td><td>Run an executable using a node version</td></tr><tr><td><code>nvs which [version]</code></td><td>Show the path to a node version binary</td></tr><tr><td><code>nvs ls [filter]</code></td><td>List local node versions</td></tr><tr><td><code>nvs ls-remote [filter]</code></td><td>List node versions available to download</td></tr><tr><td><code>nvs link [version]</code></td><td>Link a version as the default</td></tr><tr><td><code>nvs unlink [version]</code></td><td>Remove links to a default version</td></tr><tr><td><code>nvs alias [name] [value]</code></td><td>Set or recall aliases for versions</td></tr><tr><td><code>nvs remote [name] [value]</code></td><td>Set or recall download base URIs</td></tr></tbody></table><p>A version or filter consists of a complete or partial semantic version number or version label (&quot;lts&quot;, &quot;latest&quot;, &quot;Argon&quot;, etc.), optionally preceded by a remote name, optionally followed by an architecture, separated by slashes. Examples: &quot;lts&quot;, &quot;4.6.0&quot;, &quot;6/x86&quot;, &quot;node/6.7/x64&quot;.</p><p>[Refer to the <a href="https://github.com/jasongin/nvs/blob/master/docs" target="_blank" rel="noreferrer">https://github.com/jasongin/nvs/blob/master/docs</a>](<a href="https://github.com/jasongin/nvs/blob/master/doc)" target="_blank" rel="noreferrer">https://github.com/jasongin/nvs/blob/master/doc)</a> for more details about each command.</p><h2 id="interactive-menus" tabindex="-1">Interactive menus <a class="header-anchor" href="#interactive-menus" aria-label="Permalink to &quot;Interactive menus&quot;">​</a></h2><p>When invoked with no parameters, <code>nvs</code> displays an interactive menu for switching and downloading node versions.</p><p><img src="https://github.com/jasongin/nvs/releases/download/v0.8.0/nvs-menu.gif" alt="nvs menu"></p><p><em>NVS uses <a href="https://github.com/jasongin/console-menu" target="_blank" rel="noreferrer"><strong>console-menu</strong></a>, a module originally written for this project then published separately.</em></p><h2 id="vs-code-support" tabindex="-1">VS Code support <a class="header-anchor" href="#vs-code-support" aria-label="Permalink to &quot;VS Code support&quot;">​</a></h2><p>Visual Studio Code can use NVS to select a node version to use when launching or debugging. In <code>launch.json</code> (in the folder <code>.vscode</code> located on the project&#39;s root folder), add a <code>&quot;runtimeArgs&quot;</code> attribute with an NVS version string and a <code>&quot;runtimeExecutable&quot;</code> attribute that refers to <code>nvs.cmd</code> (Windows) or <code>nvs</code> (Mac, Linux). (You may need to specify an absolute path such as <code>&quot;\${env:HOME}/.nvs/nvs&quot;</code> if NVS is not in VS Code&#39;s PATH.)</p><p>Example: Configure <code>launch.json</code> so VS Code uses NVS to launch node version 6.10:</p><div class="language-json"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">configurations</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">: </span><span style="color:#89DDFF;">[</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">type</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">node</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">request</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">launch</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">name</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Launch Program</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">program</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">\${file}</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">args</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">],</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">runtimeArgs</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">6.10</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">],</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">windows</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">runtimeExecutable</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">nvs.cmd</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">osx</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">runtimeExecutable</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">nvs</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">linux</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">runtimeExecutable</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">nvs</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">]</span></span></code></pre></div><p>Or, remove the version string from <code>&quot;runtimeArgs&quot;</code> to get the version from a <code>.node-version</code> file in the project directory. For more details, see the <a href="https://github.com/jasongin/nvs/blob/master/doc/VSCODE.md" target="_blank" rel="noreferrer">NVS VS Code https://github.com/jasongin/nvs/blob/master/documentation</a> or run <code>nvs help vscode</code>.</p><h2 id="configurable-remotes" tabindex="-1">Configurable remotes <a class="header-anchor" href="#configurable-remotes" aria-label="Permalink to &quot;Configurable remotes&quot;">​</a></h2><p>The <code>nvs remote</code> command allows configuration of multiple named download locations. NVS manages versions from different remote locations separately, so there is no risk of version collisions. By default there is a single remote pointing to Node.js official releases:</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">$ nvs remote</span></span>
<span class="line"><span style="color:#A6ACCD;">default  node</span></span>
<span class="line"><span style="color:#A6ACCD;">node     https://nodejs.org/dist/</span></span></code></pre></div><p>This makes it possible to get builds from other sources. The following command sequence adds a remote entry for nightly builds, lists nightly builds, and adds a build:</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">$ nvs remote add nightly https://nodejs.org/download/nightly/</span></span>
<span class="line"><span style="color:#A6ACCD;">$ nvs lsr nightly/13</span></span>
<span class="line"><span style="color:#A6ACCD;">nightly/13.1.1-nightly20191120c7c566023f</span></span>
<span class="line"><span style="color:#A6ACCD;">...</span></span>
<span class="line"><span style="color:#A6ACCD;">$ nvs add nightly/13</span></span></code></pre></div><p>Other remote sources are supported, for example:</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">nvs remote add iojs https://iojs.org/dist/</span></span>
<span class="line"><span style="color:#A6ACCD;">nvs remote add chakracore https://nodejs.org/download/chakracore-release/</span></span></code></pre></div><h2 id="aliases" tabindex="-1">Aliases <a class="header-anchor" href="#aliases" aria-label="Permalink to &quot;Aliases&quot;">​</a></h2><p>An alias refers to a combination of a remote name and a semantic version. (Processor architectures are not aliased.) When setting an alias, the remote name may be omitted, in which case the alias refers to the default remote. An alias may be used in place of a version string in any of the other commands.</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">$ nvs alias myalias 6.7.0</span></span>
<span class="line"><span style="color:#A6ACCD;">$ nvs alias</span></span>
<span class="line"><span style="color:#A6ACCD;">myalias default/6.7.0</span></span>
<span class="line"><span style="color:#A6ACCD;">$ nvs run myalias --version</span></span>
<span class="line"><span style="color:#A6ACCD;">v6.7.0</span></span>
<span class="line"><span style="color:#A6ACCD;">$ nvs which myalias</span></span>
<span class="line"><span style="color:#A6ACCD;">~/.nvs/node/6.7.0/x64/bin/node</span></span>
<span class="line"><span style="color:#A6ACCD;">$ nvs which myalias/32</span></span>
<span class="line"><span style="color:#A6ACCD;">~/.nvs/node/6.7.0/x86/bin/node</span></span></code></pre></div><p><a href="https://github.com/jasongin/nvs/blob/master/doc/ALIAS.md#aliasing-directories" target="_blank" rel="noreferrer">An alias may also refer to a local directory</a>, enabling NVS to switch to a local private build of node.</p><h2 id="automatic-switching-per-directory" tabindex="-1">Automatic switching per directory <a class="header-anchor" href="#automatic-switching-per-directory" aria-label="Permalink to &quot;Automatic switching per directory&quot;">​</a></h2><p>In either Bash or PowerShell, NVS can automatically switch the node version in the current shell as you change directories. This function is disabled by default; to enable it run <code>nvs auto on</code>. Afterward, whenever you <code>cd</code> or <code>pushd</code> under a directory containing a <code>.node-version</code> or an <a href="https://github.com/nvm-sh/nvm#nvmrc" target="_blank" rel="noreferrer"><code>.nvmrc</code></a> file then NVS will automatically switch the node version accordingly, downloading a new version if necessary. When you <code>cd</code> out to a directory with no <code>.node-version</code> or <code>.nvmrc</code> file anywhere above it, then the default (linked) version is restored, if any.</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">~$ nvs link 6.9.1</span></span>
<span class="line"><span style="color:#A6ACCD;">~/.nvs/default -&gt; ~/.nvs/node/6.9.1/x64</span></span>
<span class="line"><span style="color:#A6ACCD;">~$ nvs use</span></span>
<span class="line"><span style="color:#A6ACCD;">PATH += ~/.nvs/default/bin</span></span>
<span class="line"><span style="color:#A6ACCD;">~$ nvs auto on</span></span>
<span class="line"><span style="color:#A6ACCD;">~$ cd myproject</span></span>
<span class="line"><span style="color:#A6ACCD;">PATH -= ~/.nvs/default/bin</span></span>
<span class="line"><span style="color:#A6ACCD;">PATH += ~/.nvs/node/4.6.1/x64/bin</span></span>
<span class="line"><span style="color:#A6ACCD;">~/myproject$ cd ..</span></span>
<span class="line"><span style="color:#A6ACCD;">PATH -= ~/.nvs/node/4.6.1/x64/bin</span></span>
<span class="line"><span style="color:#A6ACCD;">PATH += ~/.nvs/default/bin</span></span></code></pre></div><p><em>This feature is not available in Windows Command Prompt. Use PowerShell instead.</em></p><h2 id="manual-switching-using-node-version" tabindex="-1">Manual switching using <code>.node-version</code> <a class="header-anchor" href="#manual-switching-using-node-version" aria-label="Permalink to &quot;Manual switching using \`.node-version\`&quot;">​</a></h2><p>If your shell isn&#39;t compatible with automatic switching or you&#39;d prefer to switch manually but still take advantage of any <code>.node-version</code> or <code>.nvmrc</code> files, you can run <code>nvs use</code> with the version <code>auto</code> or just run <code>nvs auto</code>.</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">nvs use auto</span></span></code></pre></div><p>is equivalent to</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">nvs auto</span></span></code></pre></div><h1 id="how-it-works" tabindex="-1">How it works <a class="header-anchor" href="#how-it-works" aria-label="Permalink to &quot;How it works&quot;">​</a></h1><h2 id="bootstrapping-node" tabindex="-1">Bootstrapping node <a class="header-anchor" href="#bootstrapping-node" aria-label="Permalink to &quot;Bootstrapping node&quot;">​</a></h2><p>NVS uses a small amount of platform-specific shell code that bootstraps the tool by automatically downloading a private copy of node. The bootstrap code is just a few dozen lines each of Windows command script, Windows powershell script, and POSIX shell script. Besides bootstrapping, the shell scripts are also used to export PATH changes to the calling shell (which a separate node process cannot do). But all the code for querying available versions, downloading and installing node and matching npm, switching versions/architectures/engines, uninstalling, parsing and updating PATH, and more can be written in JavaScript, and mostly in a cross-platform way.</p><h2 id="version-switching" tabindex="-1">Version switching <a class="header-anchor" href="#version-switching" aria-label="Permalink to &quot;Version switching&quot;">​</a></h2><p>NVS downloads node builds under the directory specified by the <code>NVS_HOME</code> environment variable, or under the NVS tool directory if <code>NVS_HOME</code> is not set. Each build goes in a subdirectory based on the remote name, semantic version, and architecture, for example <code>node/6.7.0/x64</code>.</p><p>When you <code>nvs use</code> a version, the <code>PATH</code> of the current shell is updated to include that version&#39;s <code>bin</code> directory.</p><h2 id="global-modules" tabindex="-1">Global modules <a class="header-anchor" href="#global-modules" aria-label="Permalink to &quot;Global modules&quot;">​</a></h2><p>When using <code>npm install -g</code> or <code>npm link</code> with NVS-installed node, global modules are installed or linked into a version-specific directory. (NVS clears any <code>NPM_CONFIG_PREFIX</code> environment variable that may have been set.) This means when NVS switches versions it is also switching the set of available global modules. The <code>nvs migrate</code> command can migrate those global modules from one node version to another.</p><h2 id="symbolic-links" tabindex="-1">Symbolic links <a class="header-anchor" href="#symbolic-links" aria-label="Permalink to &quot;Symbolic links&quot;">​</a></h2><p>The <code>nvs link</code> command creates a symbolic directory link at <code>$NVS_HOME/default</code> that points to the specified version (or the current version from <code>PATH</code> at the time of the command). This can be useful when there is a need to configure a fixed path elsewhere.</p><p>On non-Windows platforms, a new shell that sources the <code>nvs.sh</code> script also sets <code>PATH</code> to include the default version, if a link is present. On Windows, the <code>PATH</code> environment variable is updated in the user profile, so that new shells will use the default version.</p><p>The <code>nvs ls</code> command lists all local node versions, marks the version currently in the path with a <code>&gt;</code>, and marks the default (linked) version, if any, with a <code>#</code>. These may be the same or different. For example:</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">node/4.5.0/x64</span></span>
<span class="line"><span style="color:#A6ACCD;"> #node/4.6.0/x64</span></span>
<span class="line"><span style="color:#A6ACCD;"> &gt;node/6.7.0/x64</span></span></code></pre></div><h2 id="system-linking" tabindex="-1">System linking <a class="header-anchor" href="#system-linking" aria-label="Permalink to &quot;System linking&quot;">​</a></h2><p>If <code>$NVS_HOME</code> is under a system path such as <code>/usr/local</code> or <code>%ProgramFiles%</code>, then the <code>nvs link</code> command additionally links into well-known Node.js system locations. (This is only allowed if there is not already a system-installed node.)</p><ul><li><p>On non-Windows platforms, symbolic links are created in <code>/usr/local/bin</code> for <code>node</code>, <code>npm</code>, and any globally-installed node modules that have executables. Note after installing or uninstalling global modules that include executables it may be necessary to run <code>nvs link</code> again to update the global links. Using NVS to link a different version of node (with different global modules) updates all the links accordingly.</p></li><li><p>On Windows, a symbolic directory link is created at <code>%ProgramFiles%\\Nodejs</code>, and that directory is added to the system <code>PATH</code>.</p></li></ul><p>This system linking functionality is skipped when <code>$NVS_HOME</code> points to a non-system directory, because it would be wrong to create symlinks in system directories to user files.</p><h2 id="dependencies" tabindex="-1">Dependencies <a class="header-anchor" href="#dependencies" aria-label="Permalink to &quot;Dependencies&quot;">​</a></h2><p>NVS has no external dependencies beyond the private copy of node that it automatically downloads. Runtime JS package dependencies are minimal and are checked in to the repo to avoid the need for an <code>npm install</code> at bootstrapping time.</p>`,80),l=[t];function r(i,c,p,d,h,u){return a(),s("div",null,l)}const v=e(o,[["render",r]]);export{y as __pageData,v as default};
